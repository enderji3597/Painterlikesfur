<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>클릭하면 털터 비 내리기</title>
    <style>
        body {
            height: 100vh;
            margin: 0;
            overflow: hidden;
            background-color: #1a1a2e; /* 어두운 배경 */
            color: white;
            font-family: 'Malgun Gothic', sans-serif;
            display: flex; /* 내용을 중앙에 배치하기 위해 */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer; /* 클릭 가능하다는 시각적 힌트 */
        }

        h1 {
            z-index: 10; /* 털터 위에 표시되도록 */
            font-size: 3em;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
        }

        p {
            z-index: 10; /* 털터 위에 표시되도록 */
            font-size: 1.2em;
            margin-top: 20px;
        }

        #turter-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* 털터가 있어도 배경 클릭 가능하게 */
            z-index: 5; /* 텍스트 뒤, 배경 위에 위치 */
        }

        .turter {
            position: absolute;
            font-size: 2em;
            font-weight: bold;
            color: #ff5722; /* 주황색 */
            opacity: 0;
            animation: fall linear infinite;
            text-shadow: 0 0 10px rgba(255, 87, 34, 0.7);
        }

        @keyframes fall {
            0% {
                top: -5%;
                opacity: 1;
                transform: translateX(0) rotate(0deg);
            }
            100% {
                top: 105%;
                opacity: 0;
                transform: translateX(var(--end-x)) rotate(var(--end-rotate));
            }
        }
    </style>
</head>
<body>
    <div id="turter-container"></div>
    <h1>화면을 클릭하면 털터 비가 내립니다!</h1>
    <p>아무 곳이나 클릭해 주세요.</p>

    <script>
        const container = document.getElementById('turter-container');
        const turterText = '털터';
        let isTurterRainStarted = false; // 털터 비 시작 여부 플래그
        let intervalId = null; // setInterval ID를 저장할 변수

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function createTurter() {
            const turter = document.createElement('span');
            turter.textContent = turterText;
            turter.classList.add('turter');

            const startX = getRandomInt(0, window.innerWidth);
            turter.style.left = startX + 'px';

            const duration = getRandomInt(8, 15);
            const delay = getRandomInt(0, 5);
            turter.style.animationDuration = duration + 's';
            turter.style.animationDelay = delay + 's';
            
            turter.style.fontSize = getRandomInt(15, 35) / 10 + 'em';
            
            const endX = getRandomInt(-200, 200);
            const endRotate = getRandomInt(-720, 720);
            
            turter.style.setProperty('--end-x', endX + 'px');
            turter.style.setProperty('--end-rotate', endRotate + 'deg');

            container.appendChild(turter);

            turter.addEventListener('animationend', () => {
                turter.remove();
            });
        }

        /**
         * 털터 비를 시작하는 함수
         */
        function startTurterRain() {
            if (isTurterRainStarted) return; // 이미 시작되었으면 중복 실행 방지
            
            isTurterRainStarted = true; // 플래그 설정
            document.body.style.cursor = 'default'; // 마우스 커서 원래대로

            // 안내 메시지 제거 또는 변경
            document.querySelector('h1').textContent = '털터 비가 내립니다...';
            document.querySelector('p').textContent = '다시 클릭하면 털터 비가 멈춥니다.';

            // 100ms마다 새로운 털터를 생성합니다.
            intervalId = setInterval(createTurter, 100);

            // 초기에 많은 털터를 빠르게 생성하여 화면을 채웁니다.
            for (let i = 0; i < 30; i++) {
                setTimeout(createTurter, i * 50);
            }
        }

        /**
         * 털터 비를 멈추는 함수
         */
        function stopTurterRain() {
            if (!isTurterRainStarted) return; // 아직 시작 안 됐으면 무시

            isTurterRainStarted = false; // 플래그 해제
            clearInterval(intervalId); // setInterval 중지

            // 모든 털터 요소를 제거합니다.
            const allTurters = document.querySelectorAll('.turter');
            allTurters.forEach(turter => turter.remove());

            document.body.style.cursor = 'pointer'; // 마우스 커서 클릭 가능하게

            // 안내 메시지 복원
            document.querySelector('h1').textContent = '화면을 클릭하면 털터 비가 내립니다!';
            document.querySelector('p').textContent = '아무 곳이나 클릭해 주세요.';
        }


        // body 전체에 클릭 이벤트 리스너 추가
        document.body.addEventListener('click', () => {
            if (!isTurterRainStarted) {
                startTurterRain(); // 비가 오고 있지 않으면 시작
            } else {
                stopTurterRain(); // 비가 오고 있으면 멈춤
            }
        });
    </script>
</body>
</html>
